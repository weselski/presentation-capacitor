{"version":3,"file":"plugin.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst CapacitorPresentation = registerPlugin('CapacitorPresentation', {\n    web: () => import('./web').then(m => new m.CapacitorPresentationWeb()),\n});\nexport * from './definitions';\nexport { CapacitorPresentation };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nexport class CapacitorPresentationWeb extends WebPlugin {\n    async open(options) {\n        var _a;\n        try {\n            let data = null;\n            switch (options.type) {\n                case 'url':\n                    data = options.url;\n                    break;\n                case 'html':\n                    data = options.html;\n                    break;\n                case 'video':\n                    data = (_a = options.videoOptions) === null || _a === void 0 ? void 0 : _a.videoUrl;\n            }\n            if (!data) {\n                throw new Error('Please enter all required values!');\n            }\n            const start = await this.startDisplay(data);\n            this.notifyListeners('onSuccessLoadUrl', start);\n            return {\n                success: start,\n            };\n        }\n        catch (error) {\n            console.log(error);\n            this.notifyListeners('onFailLoadUrl', error);\n            return {\n                error: error,\n                result: options\n            };\n        }\n    }\n    async sendMessage(message) {\n        var _a;\n        this.notifyListeners('onMessage', message);\n        (_a = this.presentationConnection) === null || _a === void 0 ? void 0 : _a.send(JSON.stringify(message));\n        return message;\n    }\n    async startDisplay(data) {\n        const presentationRequest = new window.PresentationRequest([data]);\n        return new Promise(async (resolve) => {\n            presentationRequest.addEventListener('connectionavailable', (event) => {\n                this.presentationConnection = event.connection;\n                resolve(this.presentationConnection);\n                this.presentationConnection.addEventListener('close', () => {\n                    console.log('> Connection closed.');\n                });\n                this.presentationConnection.addEventListener('terminate', () => {\n                    console.log('> Connection terminated.');\n                });\n                this.presentationConnection.addEventListener('message', (event) => {\n                    console.log('> ' + event.data);\n                });\n            });\n            await presentationRequest.start();\n            resolve(data);\n        });\n    }\n    async terminate() {\n        var _a;\n        console.log(this.presentationConnection);\n        return (_a = this.presentationConnection) === null || _a === void 0 ? void 0 : _a.terminate();\n    }\n    async getDisplays() {\n        const presentationRequest = new window.PresentationRequest(['']);\n        try {\n            await presentationRequest.getAvailability();\n            return {\n                displays: 1,\n            };\n        }\n        catch (error) {\n            return {\n                displays: 0,\n            };\n        }\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}