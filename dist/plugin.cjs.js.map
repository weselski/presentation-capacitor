{"version":3,"file":"plugin.cjs.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst CapacitorPresentation = registerPlugin('CapacitorPresentation', {\n    web: () => import('./web').then(m => new m.CapacitorPresentationWeb()),\n});\nexport * from './definitions';\nexport { CapacitorPresentation };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nexport class CapacitorPresentationWeb extends WebPlugin {\n    async open(options) {\n        var _a;\n        try {\n            let data = null;\n            switch (options.type) {\n                case 'url':\n                    data = options.url;\n                    break;\n                case 'html':\n                    data = options.html;\n                    break;\n                case 'video':\n                    data = (_a = options.videoOptions) === null || _a === void 0 ? void 0 : _a.videoUrl;\n            }\n            if (!data) {\n                throw new Error('Please enter all required values!');\n            }\n            const start = await this.startDisplay(data);\n            this.notifyListeners('onSuccessLoadUrl', start);\n            return {\n                success: start,\n            };\n        }\n        catch (error) {\n            console.log(error);\n            this.notifyListeners('onFailLoadUrl', error);\n            return {\n                error: error,\n                result: options\n            };\n        }\n    }\n    async sendMessage(message) {\n        var _a;\n        this.notifyListeners('onMessage', message);\n        (_a = this.presentationConnection) === null || _a === void 0 ? void 0 : _a.send(JSON.stringify(message));\n        return message;\n    }\n    async startDisplay(data) {\n        const presentationRequest = new window.PresentationRequest([data]);\n        return new Promise(async (resolve) => {\n            presentationRequest.addEventListener('connectionavailable', (event) => {\n                this.presentationConnection = event.connection;\n                resolve(this.presentationConnection);\n                this.presentationConnection.addEventListener('close', () => {\n                    console.log('> Connection closed.');\n                });\n                this.presentationConnection.addEventListener('terminate', () => {\n                    console.log('> Connection terminated.');\n                });\n                this.presentationConnection.addEventListener('message', (event) => {\n                    console.log('> ' + event.data);\n                });\n            });\n            await presentationRequest.start();\n            resolve(data);\n        });\n    }\n    async terminate() {\n        var _a;\n        console.log(this.presentationConnection);\n        return (_a = this.presentationConnection) === null || _a === void 0 ? void 0 : _a.terminate();\n    }\n    async getDisplays() {\n        const presentationRequest = new window.PresentationRequest(['']);\n        try {\n            await presentationRequest.getAvailability();\n            return {\n                displays: 1,\n            };\n        }\n        catch (error) {\n            return {\n                displays: 0,\n            };\n        }\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":";;;;;;AACK,MAAC,qBAAqB,GAAGA,mBAAc,CAAC,uBAAuB,EAAE;AACtE,IAAI,GAAG,EAAE,MAAM,mDAAe,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,wBAAwB,EAAE,CAAC;AAC1E,CAAC;;ACFM,MAAM,wBAAwB,SAASC,cAAS,CAAC;AACxD,IAAI,MAAM,IAAI,CAAC,OAAO,EAAE;AACxB,QAAQ,IAAI,EAAE,CAAC;AACf,QAAQ,IAAI;AACZ,YAAY,IAAI,IAAI,GAAG,IAAI,CAAC;AAC5B,YAAY,QAAQ,OAAO,CAAC,IAAI;AAChC,gBAAgB,KAAK,KAAK;AAC1B,oBAAoB,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC;AACvC,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,MAAM;AAC3B,oBAAoB,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;AACxC,oBAAoB,MAAM;AAC1B,gBAAgB,KAAK,OAAO;AAC5B,oBAAoB,IAAI,GAAG,CAAC,EAAE,GAAG,OAAO,CAAC,YAAY,MAAM,IAAI,IAAI,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC;AACxG,aAAa;AACb,YAAY,IAAI,CAAC,IAAI,EAAE;AACvB,gBAAgB,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;AACrE,aAAa;AACb,YAAY,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;AACxD,YAAY,IAAI,CAAC,eAAe,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;AAC5D,YAAY,OAAO;AACnB,gBAAgB,OAAO,EAAE,KAAK;AAC9B,aAAa,CAAC;AACd,SAAS;AACT,QAAQ,OAAO,KAAK,EAAE;AACtB,YAAY,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAC/B,YAAY,IAAI,CAAC,eAAe,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;AACzD,YAAY,OAAO;AACnB,gBAAgB,KAAK,EAAE,KAAK;AAC5B,gBAAgB,MAAM,EAAE,OAAO;AAC/B,aAAa,CAAC;AACd,SAAS;AACT,KAAK;AACL,IAAI,MAAM,WAAW,CAAC,OAAO,EAAE;AAC/B,QAAQ,IAAI,EAAE,CAAC;AACf,QAAQ,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;AACnD,QAAQ,CAAC,EAAE,GAAG,IAAI,CAAC,sBAAsB,MAAM,IAAI,IAAI,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;AACjH,QAAQ,OAAO,OAAO,CAAC;AACvB,KAAK;AACL,IAAI,MAAM,YAAY,CAAC,IAAI,EAAE;AAC7B,QAAQ,MAAM,mBAAmB,GAAG,IAAI,MAAM,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AAC3E,QAAQ,OAAO,IAAI,OAAO,CAAC,OAAO,OAAO,KAAK;AAC9C,YAAY,mBAAmB,CAAC,gBAAgB,CAAC,qBAAqB,EAAE,CAAC,KAAK,KAAK;AACnF,gBAAgB,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC,UAAU,CAAC;AAC/D,gBAAgB,OAAO,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;AACrD,gBAAgB,IAAI,CAAC,sBAAsB,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM;AAC5E,oBAAoB,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;AACxD,iBAAiB,CAAC,CAAC;AACnB,gBAAgB,IAAI,CAAC,sBAAsB,CAAC,gBAAgB,CAAC,WAAW,EAAE,MAAM;AAChF,oBAAoB,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;AAC5D,iBAAiB,CAAC,CAAC;AACnB,gBAAgB,IAAI,CAAC,sBAAsB,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAK,KAAK;AACnF,oBAAoB,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;AACnD,iBAAiB,CAAC,CAAC;AACnB,aAAa,CAAC,CAAC;AACf,YAAY,MAAM,mBAAmB,CAAC,KAAK,EAAE,CAAC;AAC9C,YAAY,OAAO,CAAC,IAAI,CAAC,CAAC;AAC1B,SAAS,CAAC,CAAC;AACX,KAAK;AACL,IAAI,MAAM,SAAS,GAAG;AACtB,QAAQ,IAAI,EAAE,CAAC;AACf,QAAQ,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;AACjD,QAAQ,OAAO,CAAC,EAAE,GAAG,IAAI,CAAC,sBAAsB,MAAM,IAAI,IAAI,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,SAAS,EAAE,CAAC;AACtG,KAAK;AACL,IAAI,MAAM,WAAW,GAAG;AACxB,QAAQ,MAAM,mBAAmB,GAAG,IAAI,MAAM,CAAC,mBAAmB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACzE,QAAQ,IAAI;AACZ,YAAY,MAAM,mBAAmB,CAAC,eAAe,EAAE,CAAC;AACxD,YAAY,OAAO;AACnB,gBAAgB,QAAQ,EAAE,CAAC;AAC3B,aAAa,CAAC;AACd,SAAS;AACT,QAAQ,OAAO,KAAK,EAAE;AACtB,YAAY,OAAO;AACnB,gBAAgB,QAAQ,EAAE,CAAC;AAC3B,aAAa,CAAC;AACd,SAAS;AACT,KAAK;AACL;;;;;;;;;"}